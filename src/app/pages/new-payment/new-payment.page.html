<main>

    <header>
        <h1>{{ 'PAYMENT_PAGE_TITLE' | t }}</h1>
    </header>


    <div class="loader" *ngIf=" loader.paymentRate  ">
        <mat-spinner [diameter]="48"></mat-spinner>
        <span>{{ 'LOADING_PAYMENT_INFORMATION' | t }}</span>
    </div>

    <section class="warning exchange-rate" *ngIf=" loader.paymentRate == false && errorOnExchangeRate; else noExchangeError ">
        {{ 'ERROR_ON_EXCHANGE_RATE' | t}}
    </section>


    <ng-template #noExchangeError>

        <div *ngIf=" a.user.isLogin; else loginFirst ">
            <div class="payment-select" *ngIf=" ! amount ">

                <div class="select-amount">
                    <div class="title">{{'SELECT_AMOUNT'| t}}</div>
                    <div class="desc"> {{ 'SELECT_AMOUNT_DESC' | t }}</div>
                </div>


                <div class="amounts" *ngIf="!inputAmount">
                    <!-- <div>
                        <input id="a2000" type="radio" name="amount" [(ngModel)]="amount" [value]="2000">
                        <label for="a2000">2천 원</label>
                    </div> -->
                    <div>
                        <input id="a10000" type="radio" name="amount" [(ngModel)]="amount" [value]="10000">
                        <label for="a10000"> {{'10_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div class="hidden">
                        <input id="a20000" type="radio" name="amount" [(ngModel)]="amount" [value]="20000">
                        <label for="a20000">{{'20_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div>
                        <input id="a30000" type="radio" name="amount" [(ngModel)]="amount" [value]="30000">
                        <label for="a30000"> {{'30_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div>
                        <input id="a50000" type="radio" name="amount" [(ngModel)]="amount" [value]="50000">
                        <label for="a50000"> {{'50_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div>
                        <input id="a100000" type="radio" name="amount" [(ngModel)]="amount" [value]="100000">
                        <label for="a100000"> {{'100_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div class="hidden">
                        <input id="a150000" type="radio" name="amount" [(ngModel)]="amount" [value]="150000">
                        <label for="a150000"> {{'150_THOUSAND_POINT' | t}}</label>
                    </div>
                    <div>
                        <input id="a200000" type="radio" name="amount" [(ngModel)]="amount" [value]="200000">
                        <label for="a200000"> {{'200_THOUSAND_POINT' | t}}</label>
                    </div>
                </div>

                <div class="manual-amount-input">
                    <div class="header" (click)=" inputAmount = true " *ngIf=" ! inputAmount ">
                        {{ 'ENTER_AMOUNT_MANUALLY' | t}}
                    </div>
                    <div class="input-amount" *ngIf=" inputAmount ">
                        <span>{{ 'ENTER_PAYMENT_AMOUNT' | t }}</span>
                        <input type="number" name="amount" #manualAmountInputBox>
                        <button class="confirm-button" (click)="onConfirmManualAmountInput( manualAmountInputBox.value )">{{ 'CONFIRM' | t}}</button>
                        <span class="cancel-button" (click)="inputAmount=false">{{ 'CANCEL' | t}}</span>
                    </div>
                </div>
            </div>

        </div>

        <div class="desc" *ngIf=" amount_in_usd_with_tax() ">

            <div>{{ 'VAT_1' | t:{ 'AMOUNT': amount | number } }}</div>
            <div class="change-point" (click)=" amount = 0; paymentMethod='' ">{{ 'CHANGE_POINT_AMOUNT' | t }}</div>

        </div>

        <ng-template #loginFirst>
            <div class="login-first" (click)=" a.open('login') ">
                {{ 'LOGIN_FIRST' | t }}
            </div>
        </ng-template>


        <div class="select-payment-method" *ngIf=" amount && paymentMethod == '' ">
            <div class="title">{{ 'SELECT_PAYMENT_METHOD' | t }}</div>
            <div class="buttons">
                <button class="bank" (click)=" onSelectBankTransaction() ">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M472 440h-8v-56c0-13.255-10.745-24-24-24h-16V208h-48v152h-48V208h-48v152h-48V208h-48v152h-48V208H88v152H72c-13.255 0-24 10.745-24 24v56h-8c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zm-56 0H96v-32h320v32zm72.267-322.942L271.179 26.463a48.004 48.004 0 0 0-30.358 0L23.733 117.058A11.999 11.999 0 0 0 16 128.274V156c0 6.627 5.373 12 12 12h20v12c0 6.627 5.373 12 12 12h392c6.627 0 12-5.373 12-12v-12h20c6.627 0 12-5.373 12-12v-27.726c0-4.982-3.077-9.445-7.733-11.216zM64 144l192-72 192 72H64z"></path></svg>
                    {{ 'BANK_TRANSACTION' | t }}
                </button>
                <button class="paypal" (click)=" onSelectPaypalPayment() ">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM48 64h480c8.8 0 16 7.2 16 16v48H32V80c0-8.8 7.2-16 16-16zm480 384H48c-8.8 0-16-7.2-16-16V224h512v208c0 8.8-7.2 16-16 16zm-336-84v8c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12zm192 0v8c0 6.6-5.4 12-12 12H236c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12z"></path></svg>
                    {{ 'PAYPAL_CREDIT' | t }}
                </button>
            </div>
        </div>



        <div class="paypal-payment" [ngClass]="{ selected: paymentMethod == 'paypal' && amount }">
            <div class="title">{{ 'PAYPAL_PAYMENT' | t }}</div>
            <!-- <button (click)=" onSelectBankTransaction() ">Change to Bank Transaction</button> -->
            <div class="paypal-button">
                <div class="vat">
                    {{ 'VAT_2' | t:{ 'AMOUNT': amount | number , 'USD': amount_in_usd_with_tax(), 'VAT': a.vat } }}
                </div>

                <div class="paypal-button">
                    <div id="paypal-button"></div>
                </div>

                <div class="paypal-desc">{{ 'PAYPAL_DESC' | t }}</div>
                
            </div>
        </div>


        <div class="select-bank" *ngIf=" amount && paymentMethod == 'bank' ">

            <div class="title">{{ 'SELECT_BANK_COUNTRY' | t }}</div>
            <div>
                <!-- <button (click)=" onSelectPaypalPayment() ">{{ 'CHANGE_TO_PAYPAL' | t }}</button> -->
            </div>
            <div class="buttons">
                <div class="country korea" (click)=" onSelectBankCountry('koreanBank'); ">
                    <div class="country-name">{{ 'KOREAN_BANK' | t }}</div>
                    <div class="bank-name">{{ 'KOREAN_BANK_NAME' | t }}</div>
                </div>
                <div class="country china" (click)=" onSelectBankCountry('chineseBank'); ">
                    <div class="country-name">{{ 'CHINESE_BANK' | t }}</div>
                    <div class="bank-name">{{ 'CHINESE_BANK_NAME' | t }}</div>
                </div>
                <div class="country japan" (click)=" onSelectBankCountry('japaneseBank'); ">
                    <div class="country-name">{{ 'JAPANESE_BANK' | t }}</div>
                    <div class="bank-name">{{ 'JAPANESE_BANK_NAME' | t }}</div>
                </div>
            </div>
        </div>


        <div class="banks">

            <div class="korean-bank" *ngIf=" paymentMethod == 'koreanBank' ">
                <div class="korean-bank-title">{{ 'WOORIBANK_PAYMENT_TITLE' | t }}</div>
                <div class="korean-bank-desc">
                    <div class="leave-a-message-after-deposit">{{ 'WOORIBANK_PAYMENT_DESC_1' | t }}</div>
                    <div class="bank-transaction-information">
                        <div class="wooribank-name">{{ 'WOORIBANK_NAME' | t }}</div>
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col">{{ 'ACCOUNT_HOLDER_NAME' | t }}</div>
                                <div class="col">
                                    <b>{{ 'WOORIBANK_ACCOUNT_HOLDER_NAME' | t }}</b>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">{{ 'ACCOUNT_NO' | t }}</div>
                                <div class="col">
                                    <b>1005-103-328421</b>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">{{ 'AMOUNT_TO_PAY' | t }}</div>
                                <div class="col">{{ amount_in_krw_with_tax() | number }} {{ 'WON' | t }}</div>
                            </div>
                        </div>
                    </div>

                    <div class="exchange-vat-desc">
                        {{ 'WOORIBANK_PAYMENT_AMOUNT_DESC' | t:{ 'point': amount, 'usd': amount_in_usd(), 'VAT': paymentRate?.VAT } }} </div>
                </div>
            </div>
            <div class="chinese-bank" *ngIf=" paymentMethod == 'chineseBank' ">
                <div class="container">
                    <div class="row">
                        <b>{{ 'CHINESE_BANK_NAME' | t }}</b>
                    </div>
                    <div class="row">
                        <div class="col">{{ 'ACCOUNT_HOLDER_NAME' | t }}</div>
                        <div class="col">
                            <b>{{ 'CHINESE_BANK_ACCOUNT_HOLDER_NAME' | t }}</b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">{{ 'ACCOUNT_NO' | t }}</div>
                        <div class="col">
                            <b>{{ 'CHINESE_BANK_ACCOUNT_NO' | t }}</b>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">{{ 'AMOUNT_TO_PAY' | t }}</div>
                        <div class="col">{{ amount_in_cny_with_tax() | number }} {{ 'RENMINBI' | t }}</div>
                    </div>
                </div>
                <div class="exchange-vat-desc">{{ 'CHINESE_BANK_PAYMENT_AMOUNT_DESC' | t:{ 'point': amount, 'usd': amount_in_usd(), 'VAT': paymentRate?.VAT
                    } }} </div>
            </div>
        </div>

        <div class="japanese-bank" *ngIf=" paymentMethod == 'japaneseBank' ">
            <div class="container">

                <div class="row">
                    <b>{{ 'JAPANESE_BANK_NAME' | t }}</b>
                    <div>
                        {{ 'ACCOUNT_HOLDER_NAME' | t }}
                        <b>{{ 'JAPANESE_BANK_ACCOUNT_HOLDER_NAME' | t }}</b>
                    </div>
                    <div>
                        {{ 'ACCOUNT_NO' | t }}
                        <b>{{ 'JAPANESE_BANK_ACCOUNT_NO' | t }}</b>
                    </div>
                </div>

                <div class="">
                    <div class="">{{ 'AMOUNT_TO_PAY' | t }}</div>
                    <div class="">{{ amount_in_jpy_with_tax() | number }} {{ 'YEN' | t }}</div>
                </div>
            </div>

            <div class="exchange-vat-desc">{{ 'JAPANESE_BANK_PAYMENT_AMOUNT_DESC' | t:{ 'point': amount, 'usd': amount_in_usd(), 'VAT': paymentRate?.VAT
                } }} </div>

        </div>

        <div class="change-point" (click)=" amount = 0; paymentMethod='' " *ngIf=" paymentMethod == 'paypal' || paymentMethod == 'koreanBank' || paymentMethod =='chineseBank' || paymentMethod == 'japaneseBank' ">
            <span class="app-button">{{ 'CHANGE_POINT_AMOUNT' | t }}</span>
        </div>

        <footer class="payment-footer">
            <div class="refund-policy">{{ 'REFUND_POLICY' | t }}</div>
            <div class="help">
                <a class="app-button" (click)=" a.onClickContactAdmin() ">{{ 'PAYMENT_DIFFICULT' | t}}</a>
            </div>
        </footer>
    </ng-template>


</main>