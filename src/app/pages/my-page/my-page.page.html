<main data-role="my-page-page">
    <header>
        <h1 class="text-white">{{ 'MYPAGE' | t }}</h1>
    </header>
    <section class="loader" *ngIf="loader.mypage">
        Loading...
    </section>
    <section class="page-content">
        <div class="page-description">
            In this page, You will see all the information you need.
        </div>
        <div id="my-page-profile">
            <div class="profile-photo">
                <div class="student-photo">
                    <img src="{{ mypage.photoURL }}" *ngIf=" mypage?.photoURL ">
                </div>
                <div class="update-photo-button">
                    <span class="app-button">
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-camera fa-w-16 fa-7x"><path fill="currentColor" d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"></path></svg>
                        Update Photo
                    </span>
                </div>
            </div>
            <div class="profile-meta">
                <div>
                    <b>Name:</b>
                    <span data-role="user-name">{{ mypage.name }}</span>
                </div>
                <div>
                    <b>Point:</b>
                    <span data-role="user-point">{{ mypage.point | number }}</span>
                </div>
                <div>
                    <b>Timezone:</b> {{ mypage.timezone_country }} ({{ mypage.timezone }})
                </div>
                <div class="class-id">
                    <span data-role="class-software-icon">
                        <img src="/assets/img/messengers/{{ mypage.class_software }}.png">
                    </span>
                    <b>Class ID:</b>
                    <span data-role="class-software-id">{{ mypage.class_software_id }}</span>
                </div>
            </div>
        </div>

        <div id="student-session-stats" class="container">
            <div class="row">
                <div class="col-sm-6">
                    <span>No. of Reservations</span>
                    <span data-role="no-of-reservation">{{ mypage.no_of_reservation }}</span>
                </div>
                <div class="col-sm-6">
                    <span>No. of Past</span>
                    <span data-role="no-of-reservation">{{ mypage.no_of_past }}</span>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div class="next-class" *ngIf="mypage.next_class">
                        <div>Next class</div>
                        <div>
                            <div>
                                <img src="{{ mypage.next_class.teacher_photoURL }}">
                            </div>
                            <div>{{ mypage.next_class.teacher_name}}</div>
                            <div>
                                {{ mypage.next_class.date_display }} {{ mypage.next_class.class_begin_display }}
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-sm-6">
                    <div id="book-in-use" class="panel-container">
                        <div class="panel-title">Book in use</div>
                        <div class="panel-content">
                            <svg viewBox="0 0 448 512"><path fill="currentColor" d="M356 160H188c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12zm12 52v-8c0-6.6-5.4-12-12-12H188c-6.6 0-12 5.4-12 12v8c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12zm64.7 268h3.3c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H80c-44.2 0-80-35.8-80-80V80C0 35.8 35.8 0 80 0h344c13.3 0 24 10.7 24 24v368c0 10-6.2 18.6-14.9 22.2-3.6 16.1-4.4 45.6-.4 65.8zM128 384h288V32H128v352zm-96 16c13.4-10 30-16 48-16h16V32H80c-26.5 0-48 21.5-48 48v320zm372.3 80c-3.1-20.4-2.9-45.2 0-64H80c-64 0-64 64 0 64h324.3z"></path></svg>
                            <span>{{ mypage.book_next }}</span>
                         </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div id="my-level" class="panel-container">
                        <div class="panel-title">My Level</div>
                        <div class="panel-content">
                            <div data-role="user-level" class="circle">
                                <span>
                                     <svg [attr.level-color]=" mypage.level" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"></path></svg>
                                </span>
                                <span class="no">{{ mypage.level }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div id="progress-bargraph" class="panel-container">
                        <div class="panel-title">My progress of learning</div>
                        <div class="panel-content" *ngIf=" mypage.progress ">
                            <div *ngFor=" let idx of a.keys( mypage.progress ) " title="Teacher: {{ mypage.progress[idx]['teacher_name'] }}. Date: {{ mypage.progress[idx]['date'] }}. Comments: {{  mypage.progress[idx]['comment'] }}">
                                <div class="bar-item" [style.height]="  mypage.progress[idx]['level'] * 10 + 'px' " [attr.level]=" mypage.progress[idx]['level'] ">
                                    <span class="level">{{ mypage.progress[idx]['level'] }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div id="my-introduction">
                        <h2>My introduction in English.</h2>
                        <div class="intro-desc">
                            <div> 
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm16 400c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V80c0-8.822 7.178-16 16-16h352c8.822 0 16 7.178 16 16v352zm-228-80h12V232h-12c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h48c6.627 0 12 5.373 12 12v140h12c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12h-72c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12zm36-240c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32z"></path></svg>
                                </span>
                                <span>꼭 영어로 적어주세요.</span>
                            </div>
                            <div> <em>예제 Hello.</em> I am Yuna, Kim. I am 12 years old. I love singing.</div>
                            <div> <em>예제 더보기</em> </div>
                        </div>
                        <form (ngSubmit)="onSubmitGreeting( $event )" *ngIf=" mypage ">
                            <textarea name="greeting" [(ngModel)]=" mypage.greeting "></textarea>
                            <div class="buttons">

                                <button data-button="greeting-update" type="submit" *ngIf=" ! loader.greeting ">Submit</button>
                                <div class="greeting-saved" *ngIf="show.greetingSaved">* Your greeting has been saved!</div>
                                <span class="loader" *ngIf=" loader.greeting ">Saving...</span>
                            </div>

                        </form>
                        <div class="warning">
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
                            </span>
                            <b>주의:</b> 개인 정보 보호를 위해 전화번호, 이메일, 스카이프/카카오톡/위쳇 등 개인 연락처를 기록하지말아주세요.
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div id="auction">
                        <h2>Hiring Teacher</h2>
                        <div data-button="open-auction-box" class="auction-intro" *ngIf="!show.auction" (click)="show.auction=true">
                            <span>You are not hiring a teacher. Do you want to hire a teacher?</span>
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                            </span>
                        </div>
                        <form class="auction-form" (ngSubmit)=" onSubmitAuction( $event ) " *ngIf="show.auction">
                            <div class="day">
                                <div>What day do you want to study?</div>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" name="sunday" [(ngModel)]="mypage.auction.sunday">Sun</label>
                                    <label>
                                        <input type="checkbox" name="monday" [(ngModel)]="mypage.auction.monday">Mon</label>
                                    <label>
                                        <input type="checkbox" name="tuesday" [(ngModel)]="mypage.auction.tuesday">Tue</label>
                                    <label>
                                        <input type="checkbox" name="wednesday" [(ngModel)]="mypage.auction.wednesday">Wed</label>
                                    <label>
                                        <input type="checkbox" name="thursday" [(ngModel)]="mypage.auction.thursday">Thu</label>
                                    <label>
                                        <input type="checkbox" name="friday" [(ngModel)]="mypage.auction.friday">Fri</label>
                                    <label>
                                        <input type="checkbox" name="saturday" [(ngModel)]="mypage.auction.saturday">Sat</label>
                                </div>
                            </div>
                            <div class="time">
                                <div>What time the class should begin?</div>
                                <div>
                                    <select name="hour" [(ngModel)]="mypage.auction.hour">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                    </select>
                                    :
                                    <select name="minute" [(ngModel)]="mypage.auction.minute">
                                        <option value="0">0</option>
                                        <option value="5">5</option>
                                        <option value="10">10</option>
                                        <option value="15">15</option>
                                        <option value="20">20</option>
                                        <option value="25">25</option>
                                        <option value="30">30</option>
                                        <option value="35">35</option>
                                        <option value="40">40</option>
                                        <option value="45">45</option>
                                        <option value="50">50</option>
                                        <option value="55">55</option>
                                    </select>
                                </div>
                            </div>

                            <div class="duration">
                                <div>How long the class should be?</div>

                                <select name="duration" [(ngModel)]="mypage.auction.duration">
                                    <option value="0">0</option>
                                    <option value="5">5</option>
                                    <option value="10">10</option>
                                    <option value="15">15</option>
                                    <option value="20">20</option>
                                    <option value="25">25</option>
                                    <option value="30">30</option>
                                    <option value="40">40</option>
                                    <option value="50">50</option>
                                    <option value="60">60</option>
                                    <option value="80">80</option>
                                    <option value="100">100</option>
                                    <option value="120">120</option>
                                </select>
                            </div>

                            <div class="point" *ngIf=" mypage.auction.duration ">
                                <div>How much should each class be?</div>

                                <select name="point" [(ngModel)]=" mypage.auction.point ">
                                    <option *ngFor="let point of [ 50, 80, 100, 130, 150, 180, 200, 230, 250 ]" value="{{ mypage.auction.duration * point  }}">
                                        {{ mypage.auction.duration * point }}
                                    </option>
                                </select>

                            </div>
                            <div class="comments">
                                <label>Comments</label>
                                <textarea name="comment" [(ngModel)]="mypage.auction.comment"></textarea>
                            </div>

                            <div class="buttons" *ngIf=" ! loader.auction ">
                                <button data-button="auction-update" type="submit">Update</button>
                                <button data-button="auction-delete" type="button" (click)="onDeleteAuction()">Delete</button>
                                <div class="auction-saved" *ngIf="show.auctionSaved">* Your acution has been saved!</div>
                            </div>
                            <div class="loader" *ngIf=" loader.auction ">
                                Saving auction ....
                            </div>
                            <div class="note">
                                선생님 구하기를 신청하시면, 선생님들께서 보고 신청을 합니다. 회원님께서는 이곳에서 어떤 선생님들께서 신청했는지 알 수 있습니다. If you advertise for hiring teacher, you will see
                                teachers' application here.
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div id="teacher-list">
            <h2>
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                        <path fill="currentColor" d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path>
                    </svg>
                </span>
                <span>Teacher List</span>
            </h2>
            <div class="teachers" *ngIf=" teachers.length ">
                <div class="teacher" *ngFor="let teacher of teachers ">
                    <a routerLink="/schedule-table" [queryParams]="{idx_teacher: teacher.ID}">
                        <div class="photo">
                            <img src="{{ teacher.photoURL }}">
                        </div>
                        <div class="text">
                            <div class="teacher-name">{{ teacher.display_name }}</div>
                            <div class="stars" [attr.grade]="teacher.grade">
                                <svg *ngFor="let i of a.countStar(teacher.grade)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                </svg>
                            </div>
                            <!-- <div class="title">Stars: {{ teacher.grade }}</div> -->
                        </div>
                    </a>
                </div>
            </div>
        </div>

    </section>
</main>