<h1>User</h1>
<form (ngSubmit)="quickSearch = false; onSubmit()">
    <div>
        <div class="user-type">
            <span>Type</span>
            <input id="student-checkbox" type="checkbox" name="type_male" [(ngModel)]="form.student">
            <label for="student-checkbox">Student</label>
            <input id="teacher-checkbox" type="checkbox" name="type_male" [(ngModel)]="form.teacher">
            <label for="teacher-checkbox">Teacher</label>
        </div>
        <div class="gender">
            <span>Gender</span>
            <input id="male-checkbox" type="checkbox" name="type_male" [(ngModel)]="form.male">
            <label for="male-checkbox">Male</label>
            <input id="female-checkbox" type="checkbox" name="type_male" [(ngModel)]="form.female"> 
            <label for="female-checkbox">Female</label>
        </div>
        <div>
            Limit:
            <input class="limit" type="text" name="limit" [(ngModel)]="form.limit"> 
        </div>
        <div>
            Grade:
            <input class="grade" type="text" name="grade_begin" [(ngModel)]="form.grade_begin"> ~
            <input class="grade" type="text" name="grade_end" [(ngModel)]="form.grade_end"> 
        </div>
    </div>
    <div>

        <div>
            Bookable Time:
            <input  class="bookable-time"type="text" name="bookable_time_begin" [(ngModel)]="form.bookable_time_begin"> ~
            <input  class="bookable-time" type="text" name="bookable_time_end" [(ngModel)]="form.bookable_time_end">     
        </div>
        <div>
            Domain:
            <input class="domain" type="text" name="domain" [(ngModel)]="form.domain"> 
        </div>
        <div >
            Timezone:
            <input class="timezone" type="text" name="timezone" [(ngModel)]="form.timezone"> 
        </div>
        <div>
            Manager:
            <input type="checkbox" name="manager" [(ngModel)]="form.manager">
        </div>
    </div>
    <div>
        <div>
            Reg Date:
            <input class="reg-date" type="text" name="date_begin" [(ngModel)]="form.date_begin"> ~
            <input class="reg-date" type="text" name="date_end" [(ngModel)]="form.date_end">
        </div>

        <div>
            List Order:
            <input class="list-order" type="text" name="list_order_begin" [(ngModel)]="form.list_order_begin"> ~
            <input class="list-order" type="text" name="list_order_end" [(ngModel)]="form.list_order_end"> 
        </div>
        <div>
            Point:
            <input class="user-point" type="text" name="point_begin" [(ngModel)]="form.point_begin"> ~
            <input class="user-point" type="text" name="point_end" [(ngModel)]="form.point_end">
        </div>
    </div>

    <div>
</div>

    <div class="display"> 
        <span>Display:</span>
        <span>
            <input type="checkbox" id="display_ID" name="display_ID" [(ngModel)]="form.display.ID">
            <label for="display_ID">ID</label>
        </span>
        <span>
            <input type="checkbox" id="phone_number" name="phone_number" [(ngModel)]="form.display.phone_number">
            <label for="phone_number">Phone Number</label>
        </span>
        <span>
            <input type="checkbox" id="display_grade" name="display_grade" [(ngModel)]="form.display.grade">
            <label for="display_grade">Grade</label>
        </span>
        <span>
            <input type="checkbox" id="display_bookable_time" name="display_bookable_time" [(ngModel)]="form.display.bookable_time">
            <label for="display_bookable_time">Bookable Time</label>
        </span>
        <span>
            <input type="checkbox" id="display_list_order" name="display_list_order" [(ngModel)]="form.display.list_order">
            <label for="display_list_order">List Order</label>
        </span>
        <span>
            <input type="checkbox" id="display_timezone" name="display_timezone" [(ngModel)]="form.display.timezone">
            <label for="display_timezone">Timezone</label>
        </span>
        <span>
            <input type="checkbox" id="display_domain" name="display_domain" [(ngModel)]="form.display.domain">
            <label for="display_domain">Domain</label>
        </span>
        <span>
            <input type="checkbox" id="display_manager" name="display_manager" [(ngModel)]="form.display.manager">
            <label for="display_manager">Manager</label>
        </span>
    </div>

    <div class="stat"> 
        <span>Stat:</span>
        <span>
            <input id="count_result" type="checkbox" name="count_result" [(ngModel)]="form.display.stat.count_result">
            <label for="count_result">Count of Result</label>
        </span>
        <span>
            <input [(ngModel)]="form.display.stat.count_daily_registration" id="count_daily_registration" type="checkbox" name="count_daily_registration">
            <label for="count_daily_registration">Daily count of Registration</label>
        </span>

        <span>
            <input [(ngModel)]="form.display.stat.count_user_type" id="count_user_type" type="checkbox" name="count_user_type">
            <label for="count_user_type">Count of User Type</label>
        </span>

        <!-- <input type="checkbox" id="count_monthly_registration" name="count_monthly_registration" [(ngModel)]="form.display.stat.count_monthly_registration"> <label for="count_daily_registration">Monthly count of Registration</label> -->
        <span>
            <input type="checkbox" name="count_domain" id="count_domain" [(ngModel)]="form.display.stat.count_domain">
            <label for="count_domain">Count of domain</label>
        </span>

        <span>
            <input type="checkbox" id="count_timezone" name="count_timezone" [(ngModel)]="form.display.stat.count_timezone">
            <label for="count_timezone">Count of Timezone</label>
        </span>
    </div>

    <div class="last">
        <div>
            <label for="user-search">
                User
            </label>
            <input id="user-search" class="user-search" type="text" name="name" [(ngModel)]="form.name"> 
        </div>
        <div>
            Order
            <select name="order" [(ngModel)]="form.order" (change)="onChangeSelectOrder($event)">
                <option value="regdate">Reg. Date</option>
                <option value="ID">User ID</option>
                <option value="point">Point</option>
                <option value="grade">Grade</option>
                <option value="list_order">List Order</option>
                <option value="bookable_time">Bookable Time</option>
            </select>
            by
            <select name="by" [(ngModel)]="form.by">
                <option value="ASC">ASC</option>
                <option value="DESC">DESC</option>
            </select>
        </div>
        <button class="app-button" type="submit">Search</button>
    </div>
</form>
<hr>

<h2 class="loader" *ngIf="show.loader">
    <mat-spinner [diameter]="48"></mat-spinner>
    Loading...
</h2>
<section class="result" *ngIf=" re ">

    <div class="statistics">
        <div class="daily-registration" *ngIf=" form.display.stat.count_daily_registration && stat.daily_registration.keys.length ">
            <!-- {{ stat.daily_registration | json }} -->
            <div class="day" *ngFor=" let day of stat.daily_registration.keys">
                <!-- {{ day | json }} -->
                <div class="bar" [style.height]=" stat.daily_registration.data[day] + 'px' " [style.backgroundColor]="dailyColor(stat.daily_registration.data[day])">&nbsp;</div>
                <div class="day">{{ stat.daily_registration.data[day] }}</div>
                <div class="date">{{ day }}</div>
                <!-- {{ stat.daily_registration.data[day] | json }} -->
            </div>
        </div>
        <div class="stats">
            <div class="stats-item" *ngIf=" form.display.stat.count_result">
                Search result: {{ this.re.length }}
            </div>
            <ng-container *ngIf=" form.display.stat.count_user_type ">
            <div class="stats-item">
                Student: {{ this.stat.studnet }}
            </div>
            <div class="stats-item">
                Teacher: {{ this.stat.teacher }}
            </div>
            </ng-container>
            <div class="stats-item" *ngIf=" form.display.stat.count_domain">
                Domain: {{ this.stat.domain | json }}
            </div>
            <div class="stats-item" *ngIf=" form.display.stat.count_timezone">
                Timezone: {{ this.stat.timezone | json }}
            </div>
        </div>
    </div>

    <div class="custom-table">
        <table  class="users">
                <tr>
                    <th *ngIf=" form.display.ID ">ID</th>
                    <th *ngIf=" a.isSuperManager ">(L)</th>
                    <th>Display Name</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Katalk ID</th>
                    <th>Point</th>
                    <th *ngIf=" form.display.phone_number ">Phone Number</th>
                    <th *ngIf=" form.display.grade ">Gr</th>
                    <th *ngIf=" form.display.bookable_time ">Bt</th>
                    <th *ngIf=" form.display.list_order ">Lo</th>
                    <th *ngIf=" form.display.timezone ">Tz</th>
                    <th *ngIf=" form.display.domain ">Do</th>
                    <th *ngIf=" form.display.manager ">Manager</th>
                    <th>Date</th>
                </tr>
                <tr class="user" *ngFor=" let user of re ">
                    <td class="id" *ngIf=" form.display.ID ">{{ user.ID }}</td>
                    <td *ngIf=" a.isSuperManager ">
                        <a class="login-as-user" href='{{ a.userLoginUrl(user) }}' target='_blank'>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"/></svg>
                        </a>
                    </td>
                    <td class="display_name">
                        {{ a.shortName( user.display_name ) }}
                        <ng-container *ngIf="user.no_of_future && user.no_of_past">
                            ({{ user.no_of_future }}/{{ user.no_of_past }})
                        </ng-container>
                    </td>
                    <td class="name">
                        <a class="user-info" matTooltip="{{user.name}}" routerLink="/manager/user-info/{{user.ID}}">
                            <svg viewBox="0 0 576 512">
                                <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                            </svg>
                            {{ user.name.slice(0,8) }}
                        </a>
                        <a class="sched" *ngIf=" user.user_type == 'T' " routerLink="/manager/schedule-table/{{user.ID}}">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M436 160H12c-6.6 0-12-5.4-12-12v-36c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48v36c0 6.6-5.4 12-12 12zM12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm116 204c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40z"></path></svg>
                            <span>Sched</span>
                        </a>
                    </td>
                    <td class="user_email">{{ user.user_email }}</td>
                    <td class="kakaotalk_id">{{ user.kakaotalk_id }}</td>
                    <td class="point">{{ user.point | number }}</td>
                    <td class="phone_number" *ngIf=" form.display.phone_number ">{{ user.phone_number }}</td>
                    <td class="grade" *ngIf=" form.display.grade ">{{ user.grade }}</td>
                    <td class="bookable_time" *ngIf=" form.display.bookable_time ">{{ user.bookable_time }}</td>
                    <td class="list_order" *ngIf=" form.display.list_order ">{{ user.list_order }}</td>
                    <td class="timezone" *ngIf=" form.display.timezone ">{{ user.timezone }}</td>
                    <td class="domain" *ngIf=" form.display.domain ">{{ user.domain }}</td>
                    <td class="manager" *ngIf=" form.display.manager ">{{ user.manager }}</td>
                    <td class="date">{{ user.date }}</td>
                </tr>
            </table>
    </div>
</section>

