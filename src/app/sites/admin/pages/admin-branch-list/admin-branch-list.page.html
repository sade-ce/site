<section id="branch-list" class="branch-list">
    <h1>Branch List</h1>

    <div class="loader" *ngIf=" loader.branch ">
        <mat-spinner [diameter]="48"></mat-spinner>
        <span>Loading... Getting Site Information...</span>
    </div>

    <div *ngIf=" !loader.branch && !branch ">
    
        <table>
            <tr>
                <th *ngIf=" a.isSuperManager ">Edit</th>
                <th>Domain</th>
                <th>Company</th>
                <th>Manager</th>
                <th *ngIf=" a.isSuperManager ">No. of students</th>
                <th *ngIf=" a.isSuperManager ">Delete</th>
            </tr>
    
            <tr *ngFor=" let branch of re ">
                <td class="edit" *ngIf=" a.isSuperManager " (click)=" onClickEdit( branch ) ">
                    <button>
                        <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M493.255 56.236l-37.49-37.49c-24.993-24.993-65.515-24.994-90.51 0L12.838 371.162.151 485.346c-1.698 15.286 11.22 28.203 26.504 26.504l114.184-12.687 352.417-352.417c24.992-24.994 24.992-65.517-.001-90.51zM164.686 347.313c6.249 6.249 16.379 6.248 22.627 0L368 166.627l30.059 30.059L174 420.745V386h-48v-48H91.255l224.059-224.059L345.373 144 164.686 324.687c-6.249 6.248-6.249 16.378 0 22.626zm-38.539 121.285l-58.995 6.555-30.305-30.305 6.555-58.995L63.255 366H98v48h48v34.745l-19.853 19.853zm344.48-344.48l-49.941 49.941-82.745-82.745 49.941-49.941c12.505-12.505 32.748-12.507 45.255 0l37.49 37.49c12.506 12.506 12.507 32.747 0 45.255z"/></svg></span>
                        <span>Edit</span>
                    </button>
                </td>
                <td>{{ branch.domain }}</td>
                <td>{{ branch.company_name }}</td>
                <td>
                    <a class="link" href="/manager/user-info/{{branch.user_ID}}" target="_blank">
                        <svg viewBox="0 0 576 512"><path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path></svg>
                        {{ branch.manager_name }}
                    </a>
                </td>
                <td class="no-of-students" *ngIf=" a.isSuperManager ">{{ branch.no_of_students }}</td>
                <td class="delete" *ngIf=" a.isSuperManager " (click)=" onClickDelete( branch ) ">
                    <button>
                        <span><svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"></path></svg></span>
                        <span>Delete</span>
                    </button>
                </td>
            </tr>
        </table>
    
    </div>

    <div *ngIf=" branch ">
        <admin-branch-edit-component [branch]="branch" (success)="onSubmitUpdate($event)"></admin-branch-edit-component>
        <div class="text-center">
            <div class="app-button px-5" (click)="branch = null">Cancel</div>
        </div>
    </div>
</section>
