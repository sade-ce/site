<div class="loader" *ngIf=" show.loader.loadProfile ">
    <mat-spinner [diameter]="48"></mat-spinner>
    Loading user profile...
</div>


<section id="content" class="container-fluid" *ngIf=" !show.loader.loadProfile ">
    <div class="row">
        <div class="col-sm-12 col-md-3">
            <section id="user-profile-form">
                <form (ngSubmit)=" onUserInfoFormSubmit( $event ) ">
                    <h2>User Edit Form</h2>
                    <div class="primary-photo">
                        <label>
                            <div class="profile-photo">
                                <img [src]="a.checkPhotoURL(user.photoURL)"/>
                            </div>
                            <input type="file" (change)="profilePhotoUpload.onChangeFile($event)">
                            <div *ngIf="profilePhotoUpload.progressPercentage > 0">
                                <mat-progress-bar mode="determinate" [value]="profilePhotoUpload.progressPercentage">
                                </mat-progress-bar>
                                <span>{{ profilePhotoUpload.progressPercentage}}%</span>
                            </div>
                            <xapi-file-upload-component #profilePhotoUpload [title]="false" [fileSelectionButton]="false" [files]="files" [showUploadedFiles]="false"
                                [showProgressBar]="false" (success)="onSuccessUploadPicture($event)">
                            </xapi-file-upload-component>
                            <div class="update-photo-button">
                                <span>
                                    Photo Upload
                                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"
                                            fill="currentColor"></path>
                                    </svg>
                                </span>
                            </div>
                        </label>
                    </div>
                    <div class="mini-form">
                        <div class="user-stats">
                            <div>
                                <b>User ID</b>
                                <span class="login-as-user" *ngIf="a.isSuperManager">
                                    {{ user.ID }}
                                    <a href='{{ a.userLoginUrl(user) }}' target='_blank'>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"/></svg>
                                    </a>
                                    <a class="sched" *ngIf=" user.user_type == 'T' " routerLink="/manager/schedule-table/{{user.ID}}">
                                        <span>Sched</span>
                                        <span>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M436 160H12c-6.6 0-12-5.4-12-12v-36c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48v36c0 6.6-5.4 12-12 12zM12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm116 204c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm128 128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40zm0-128c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-40z"></path></svg>
                                        </span>
                                    </a>
                                </span>
                            </div>
                            <div>
                                <b>Registered</b>
                                <span>{{user.user_registered | date}}</span>
                            </div>
                            <div>
                                <b>Login</b>
                                <span>{{ user.user_login }}</span>
                            </div>
                            <div>
                                <b>Point left</b>
                                <span>{{ user.point | number }}</span>
                            </div>
                        </div>
                        <div class="page-buttons">
                            <button type="button" class="app-button" routerLink="/manager/session/{{ user.user_type == 'T' ? 'teacher' : 'student' }}/{{ user.ID }}">Session Detail Page</button>
                            <button type="button" class="app-button" routerLink="/manager/payment/{{ user.ID }}">Payment Detail Page</button>
                        </div>


                        <div class="point-edit" *ngIf="a.isSuperManager">
                            <button type='button' class="app-button point-edit-button" (click)="show.newPointUpdateForm = true" *ngIf=" ! show.newPointUpdateForm ">
                                <span>New Point Edit</span>
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"></path>
                                </svg>
                            </button>
                            <section class="point-edit-form" *ngIf=" show.newPointUpdateForm ">
                                <h2>Point Update</h2>
                                <div>
                                    <div class="label">Apply :</div>
                                    <label for="apply_payment">
                                        <input type='radio' id='apply_payment' name='apply' [(ngModel)]="pointForm.apply" [value]="'payment'"> Payment
                                    </label>

                                    <label for="apply_add">
                                        <input type='radio' id='apply_add' name='apply' [(ngModel)]="pointForm.apply" [value]="'add'"> Add
                                    </label>

                                    <label for="apply_deduct">
                                        <input type='radio' id='apply_deduct' name='apply' [(ngModel)]="pointForm.apply" [value]="'deduct'"> Deduct
                                    </label>

                                    <label for="apply_refund">
                                        <input type='radio' id='apply_refund' name='apply' [(ngModel)]="pointForm.apply" [value]="'refund'"> Refund
                                    </label>
                                </div>

                                <div *ngIf=" pointForm.apply == 'payment' ">
                                        <div class="info">
                                            <div>For payment, you can open failed payments and select the payment amount to auto compute.</div>
                                            <div>
                                                <b class="warning">Warning:</b> Exchange rate changes very often. By the time you charge the point, the point may differ from the point student applied.
                                                Mostly there are small differences. Try to complete manually editing the point to complete in thousand unit.
                                            </div>
                                        </div>
                                    </div>

                                <div *ngIf=" pointForm.apply == 'refund' ">
                                        <div class="info">
                                            <div>When you refund the total amount, then simply refund the exact amount that was deposited to the bank or paypal.</div>
                                            <div>When you refund only partially or left point from use, then use 'auto computation' but double check the amount.</div>
                                        </div>
                                    </div>

                                <div *ngIf="pointForm.apply">

                                    <div *ngIf=" pointForm.apply == 'payment' ">
                                        <div>
                                            <span class="label">Amount:</span>
                                            <input type="text" name="amount" [(ngModel)]="pointForm.amount" (ngModelChange)=" pointForm.payment_method = ''; pointForm.point = 0; pointForm.currency = '' ">
                                            <button class="auto-compute-button" type="button" (click)=" onClickAutoCompute() ">Auto Compute</button>
                                            <div class="note">How much was paid to buy the point?</div>
                                            <div class="note">Click 'Auto compute' and it will deduct Buy Rate and VAT from the amount and
                                                set the converted point.</div>
                                        </div>
                                        <div class="margin-top">
                                            <span class="label">Payment Method:</span>
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-5">
                                                        <label for="payment_method_paypal">
                                                            <input type="radio" id="payment_method_paypal" name="payment_method" (ngModelChange)=" pointForm.currency = 'USD' " [(ngModel)]="pointForm.payment_method"
                                                                [value]="'paypal'"> Paypal
                                                        </label>

                                                        <label for="payment_method_wooribank">
                                                            <input type="radio" type="radio" id="payment_method_wooribank" name="payment_method" (ngModelChange)=" pointForm.currency = 'KRW' "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'wooribank'"> Woori Bank
                                                        </label>
                                                    </div>
                                                    <div class="col-7">
                                                        <label for="payment_method_chinese_bank">
                                                            <input type="radio" type="radio" id="payment_method_chinese_bank" name="payment_method" (ngModelChange)=" pointForm.currency = 'CNY' "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'chinesebank'"> Chinese Bank
                                                        </label>
                                                        <label for="payment_method_japanese_bank">
                                                            <input type="radio" type="radio" id="payment_method_japanese_bank" name="payment_method" (ngModelChange)=" pointForm.currency = 'JPY' "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'japanesebank'"> Japanese Bank
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div *ngIf=" pointForm?.currency ">
                                            <span class="label">Currency:</span>
                                            {{ pointForm?.currency }}
                                        </div>

                                    </div>

                                    <div class="margin-top">
                                        <span class="label">POINT :</span>
                                        <input type="number" name="pointForm_point" [(ngModel)]="pointForm.point">
                                        <button class="auto-compute-button" type="button" (click)=" onClickAutoCompute() " *ngIf=" pointForm.apply == 'payment' ">Auto Compute</button>
                                        <button class="auto-compute-button" type="button" (click)=" onClickAutoRefundCompute() " *ngIf=" pointForm.apply == 'refund' ">Auto Compute</button>
                                        <div class="point-adjustment">
                                            <input class="w-100 px-0 py-3" type="range" name="pointAdjustment" [(ngModel)]="pointAdjustment" (ngModelChange)="onPointAdjustmentChange()" min="-100" max="100">
                                            <div class="range">
                                                <span>-100</span>
                                                <span>0</span>
                                                <span>+100</span>
                                            </div>
                                            <span class="notes">Drag left to decrease. Drag right to increase.</span>
                                        </div>
                                        
                                    </div>
                                    <div class="margin-top">
                                        <span class="label">Reason:</span>
                                        <input class="reason" type="text" name="pointForm_reason" [(ngModel)]="pointForm.reason">
                                    </div>

                                    <ng-container *ngIf=" pointForm.apply == 'refund' ">

                                        <div class="margin-top">
                                            <span class="label">Payment Method:</span>
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-5">
                                                        <label for="payment_method_paypal">
                                                            <input type="radio" id="payment_method_paypal" name="payment_method" (ngModelChange)=" pointForm.currency = 'USD' " [(ngModel)]="pointForm.payment_method"
                                                                [value]="'paypal'"> Paypal
                                                        </label>

                                                        <label for="payment_method_wooribank">
                                                            <input type="radio" type="radio" id="payment_method_wooribank" name="payment_method" (ngModelChange)=" pointForm.currency = 'KRW'; pointForm.amount = 0 "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'wooribank'"> Woori Bank
                                                        </label>
                                                    </div>
                                                    <div class="col-7">
                                                        <label for="payment_method_chinese_bank">
                                                            <input type="radio" type="radio" id="payment_method_chinese_bank" name="payment_method" (ngModelChange)=" pointForm.currency = 'CNY'; pointForm.amount = 0 "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'chinesebank'"> Chinese Bank
                                                        </label>
                                                        <label for="payment_method_japanese_bank">
                                                            <input type="radio" type="radio" id="payment_method_japanese_bank" name="payment_method" (ngModelChange)=" pointForm.currency = 'JPY'; pointForm.amount = 0 "
                                                                [(ngModel)]="pointForm.payment_method" [value]="'japanesebank'"> Japanese Bank
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div *ngIf=" pointForm?.currency ">
                                            <span class="label">Currency:</span>
                                            {{ pointForm?.currency }}
                                        </div>

                                        <div class="margin-top">
                                            <span class="label">Amount:</span>
                                            <input type="text" name="amount" [(ngModel)]="pointForm.amount">
                                            <button class="auto-compute-button" type="button" (click)=" onClickAutoRefundCompute() ">Auto Compute</button>
                                            <div class="note">How much was paid to buy the point?</div>
                                        </div>

                                    </ng-container>
                                    <div class="buttons">
                                        <button class="app-button update" type="button" (click)="onClickPointUpdate()" *ngIf=" ! show.loader.updatePoint ">Update Point</button>
                                        <button class="app-button cancel" type="button" (click)=" show.newPointUpdateForm = false">Cancel</button>
                                    </div>
                                    <div class="point-edit-loader" *ngIf=" show.loader.updatePoint ">
                                        <mat-spinner [diameter]="40"></mat-spinner>
                                        Updating point...
                                    </div>
                                </div>

                            </section>
                        </div>
                        <!--/new-point-edit-->

                    </div>

                    <div class="profile-data-input">
                        <div>
                            <label>Email</label>
                            <input disabled value="{{ user.user_email }}" name="email">
                        </div>

                        <div>
                            <label>Password</label>
                            <input value="{{ user.user_pass }}" [(ngModel)]=" user.user_pass " name="password">
                        </div>

                        <div>
                            <label>Display Name</label>
                            <input value="{{ user.display_name }}" [(ngModel)]=" user.display_name " name="display_name">
                        </div>

                        <div>
                            <label>Name</label>
                            <input value="{{ user.name }}" [(ngModel)]=" user.name " name="name">
                        </div>

                        <div>
                            <label>Gender</label>
                            <div class="form-radio">
                                <input type='radio' id="gender_male" name='gender' [(ngModel)]=" user.gender " [value]="'M'" [checked]=" user.gender ">
                                <label for="gender_male">Male</label>
                                <input type='radio' id="gender_female" name='gender' [(ngModel)]=" user.gender " [value]="'F'" [checked]=" user.gender ">
                                <label for="gender_female">Female</label>
                            </div>
                        </div>

                        <div>
                            <label>Phone Number</label>
                            <input value="{{ user.phone_number }}" [(ngModel)]=" user.phone_number " name="phone_number">
                        </div>

                        <div>
                            <label>Class Software</label>
                            <input value="{{  user.class_software }}" [(ngModel)]=" user.class_software " name="class_software">
                        </div>
                        <div>
                            <label>Class Software ID</label>
                            <input value="{{  user.class_software_id }}" [(ngModel)]=" user.class_software_id " name="class_software_id">
                        </div>
                        <div>
                            <label>Class Software ID Check</label>
                            <input value="{{  user.class_software_id_check }}" [(ngModel)]=" user.class_software_id_check " name="class_software_id_check" maxlength="1">
                            <small>Put 'N' if the messager ID is unsearchable. make sure you double check it first.</small>
                        </div>


                        <div>
                            <label>Skype</label>
                            <input value="{{  user.skype }}" [(ngModel)]=" user.skype " name="skype">
                        </div>
                        <div>
                            <label>Kakaotalk</label>
                            <input value="{{  user.kakaotalk }}" [(ngModel)]=" user.kakaotalk " name="kakaotalk">
                        </div>
                        <div>
                            <label>WeChat</label>
                            <input value="{{  user.wechat }}" [(ngModel)]=" user.wechat " name="wechat">
                        </div>
                        <div>
                            <label>Line</label>
                            <input value="{{  user.line }}" [(ngModel)]=" user.line " name="line">
                        </div>
                        <div>
                            <label>QQ</label>
                            <input value="{{  user.qq }}" [(ngModel)]=" user.qq " name="qq">
                        </div>
                        <div>
                            <label>Youtube Video</label>
                            <input value="{{  user.youtube_video_url }}" [(ngModel)]=" user.youtube_video_url " name="youtube_video_url">
                        </div>

                        <div>
                            <label>Teacher Group</label>
                            <input value="{{  user.user_group }}" [(ngModel)]=" user.user_group " name="teacher_group">
                        </div>

                        <div>
                            <label>Teacher Grade</label>
                            <input value="{{  user.grade }}" [(ngModel)]=" user.grade " name="teacher_grade">
                        </div>

                        <div>
                            <label>Teacher Candidate</label>
                            <input value="{{  user.candidate }}" [(ngModel)]=" user.candidate " name="teacher_candidate">
                            <small>Input 1 to 9 as listing priority. If it's 0 or empty, then the teacher is not candidate for star.</small>
                        </div>

                        <div>
                            <label>List Order</label>
                            <input value="{{  user.list_order }}" [(ngModel)]=" user.list_order " name="list_order">
                        </div>

                        <div>
                            <label>Bookable Time</label>
                            <input value="{{  user.bookable_time }}" [(ngModel)]=" user.bookable_time " name="bookable_time">
                        </div>

                        <div>
                            <label>Reservable Days</label>
                            <input value="{{  user.reservable_days }}" [(ngModel)]=" user.reservable_days " name="reservable_days">
                        </div>

                        <div>
                            <label>Book Free class Until</label>
                            <input value="{{  user.block_free_class_until}}" [(ngModel)]=" user.block_free_class_until " name="block_free_class_until">
                        </div>

                        <div>
                            <label>User Type</label>
                            <input *ngIf="!a.isSuperManager" disabled value="{{user.user_type =='T' ? 'Teacher' : 'Student'}}">
                            <div class="form-radio" *ngIf="a.isSuperManager">
                                <input type='radio' id="user_type_student" name='user_type' [(ngModel)]=" user.user_type " [value]="'S'" [checked]=" user.user_type ">
                                <label for="user_type_student">Student</label>
                                <input type='radio' id="user_type_teacher" name='user_type' [(ngModel)]=" user.user_type " [value]="'T'" [checked]=" user.user_type ">
                                <label for="user_type_teacher">Teacher</label>
                            </div>
                        </div>

                        <div>
                            <label>Timezone</label>
                            <input value="{{  user.timezone }}" [(ngModel)]=" user.timezone " name="timezone">
                        </div>

                        <div *ngIf="a.isSuperManager">
                            <label>Domain</label>
                            {{  user.domain  }}
                        </div>

                        <div *ngIf="a.isSuperManager">
                            <label>Manager</label>
                            <input value="{{  user.manager  }}" [(ngModel)]=" user.manager " name="manager">
                        </div>
                        <div class="form-button">
                            <button class="app-button" type='button' (click)="onSubmitUserInfo()" *ngIf=" ! show.loader.updateProfile ">Update User Profile</button>
                            <div class="loader" *ngIf=" show.loader.updateProfile ">
                                <mat-spinner [diameter]="15"></mat-spinner>
                                Saving ...
                            </div>
                            <div class="loader" *ngIf=" show.loader.profileSaved ">
                                <mat-spinner [diameter]="15"></mat-spinner>
                                Saved...
                            </div>
                        </div>
                    </div>
                </form>
            </section>
        </div>
        <div class="col-sm-12 col-md-4">
            <section id="payments" *ngIf="user.user_type == 'S' ">
                <div class="header">
                    <h2>Payment</h2>
                    <div>
                        <b>Total: </b>
                        <span>{{ total_point_paid | number }}</span> points
                    </div>
                </div>
                <div class="loader" *ngIf=" show.loader.loadPayment ">
                    <mat-spinner [diameter]="48"></mat-spinner>
                    Loading Payment Info...
                </div>
                <div class="payment-status">
                    <div>
                        <span><svg class="payment-approved" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"/></svg></span>
                        <span>Approved</span>
                    </div>
                    <div>
                        <span><svg class="payment-refunded" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-54.4 289.1c4.7 4.7 4.7 12.3 0 17L306 377.6c-4.7 4.7-12.3 4.7-17 0L224 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L102.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L280 256l65.6 65.1z"/></svg></span>
                        <span>Refunded</span>
                    </div>
                </div>
                <div class="scroll-content">
                    <table *ngIf=" ! show.loader.loadPayment ">
                            <tr>
                                <th width="20px"></th>
                                <th>Pnt</th>
                                <th>Amt</th>
                                <th>Curr</th>
                                <th>Method</th>
                                <th>Date</th>
                            </tr>
                            <tr *ngFor="let pay of payments">
                                <td width="20px">
                                    <span><svg class="payment-approved" *ngIf="pay.state == 'approved'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"/></svg></span>
                                    <span><svg class="payment-refunded" *ngIf="pay.state == 'refund'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-54.4 289.1c4.7 4.7 4.7 12.3 0 17L306 377.6c-4.7 4.7-12.3 4.7-17 0L224 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L102.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L280 256l65.6 65.1z"/></svg></span>
                                </td>
                                <td>{{ pay.point | number }}</td>
                                <td>{{ pay.amount | number }}</td>
                                <td>{{ pay.currency }}</td>
                                <td>
                                    {{ pay.payment_method }}
                                    <svg matTooltip="{{ pay.message ? pay.message : 'No payment message.' }}" width="12px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/></svg>
                                </td>
                                <td nowrap>
                                    {{ a.veryShortDate(pay.stamp_begin) }}
                                    <svg matTooltip="{{a.dateTime( pay.stamp_begin )}}" width="12px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"/></svg>
                                </td>
                            </tr>
                    </table>
                </div>
            </section>
            <section id="failed-payment" *ngIf=" user.user_type != 'T' ">
                <div class="header">
                    <h2>Failed Payment</h2>
                    <div class="failed-payment-click-to-open" (click)=" show.failedPayments = true ">
                        <span>Open</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48H48C21.49 32 0 53.49 0 80zm240-16v176H32V80c0-8.837 7.163-16 16-16h192zM32 432V272h208v176H48c-8.837 0-16-7.163-16-16zm240 16V272h208v160c0 8.837-7.163 16-16 16H272zm208-208H272V64h192c8.837 0 16 7.163 16 16v160z"></path></svg>
                    </div>
                </div>

                <div class="note">
                    Bank transaction record will be listed here. You can click
                    <span class="calc-icon">
                        <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M336 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM48 32h288c8.822 0 16 7.178 16 16v80H32V48c0-8.822 7.178-16 16-16zm288 448H48c-8.822 0-16-7.178-16-16V160h320v304c0 8.822-7.178 16-16 16zM128 204v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm-192 96v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v136c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V300c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm-192 96v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12z"></path></svg>
                    </span>
                    to auto compute the POINT of the transaction. But be careful.
                    Always double check.
                </div>
                <div class="loader" *ngIf=" show.loader.loadFailedPayment ">
                    <mat-spinner [diameter]="48"></mat-spinner>
                    Loading Failed Payment Info...
                </div>
                <div class="scroll-content">
                    <table *ngIf=" ! show.loader.loadFailedPayment && show.failedPayments && failedPayments.length ">
                        <tr>
                            <th>Point</th>
                            <th>Amount</th>
                            <th>Currency</th>
                            <th>Method</th>
                            <th>Date</th>
                        </tr>
                        <tr *ngFor="let pay of failedPayments">
                            <td>{{ pay.point | number }}</td>
                            <td class="failed-payment-auto-compute" (click)="onClickFailedAmount( pay )">
                                {{ pay.amount | number }}
                                <span class="calc-icon">
                                    <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M336 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM48 32h288c8.822 0 16 7.178 16 16v80H32V48c0-8.822 7.178-16 16-16zm288 448H48c-8.822 0-16-7.178-16-16V160h320v304c0 8.822-7.178 16-16 16zM128 204v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm-192 96v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v136c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V300c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm-192 96v40c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12zm96 0v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12z"></path></svg>
                                </span>
                                </td>
                            <td>{{ pay.currency }}</td>
                            <td>{{ pay.payment_method }}</td>
                            <td nowrap>{{ a.veryShortDate(pay.stamp_begin) }}</td>
                        </tr>
                    </table>
                </div>
            </section>

            <section id="refund-request" [class.margin-as-teacher]="user.user_type == 'T'">
                <div class="header">
                    <h2>Refund Request</h2>
                </div>
                <table>
                    <tr>
                        <th>Teacher</th>
                        <th>Student</th>
                        <th>Date Time</th>
                        <th></th>
                    </tr>
                    <tr *ngFor=" let re of refundRequests ">
                        <td>
                            <a class='user-info' routerLink="/manager/user-info/{{re.teacher?.idx}}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ re.teacher?.display_name }}
                            </a>
                        </td>
                        <td>
                            <a class='user-info' routerLink="/manager/user-info/{{re.student?.idx}}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName( re.student?.display_name ) }}
                            </a>
                        </td>
                        <td>{{ re.date }} {{ re.class_begin }}</td>
                        <td>
                            <a class='user-info' routerLink="/manager/point-refund/idx/{{re.idx}}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                open
                            </a>
                        </td>
                    </tr>
                </table>
            </section>

            <section id="sessions">
                <div class="header">
                    <h2>Sessions</h2>
                    <div *ngIf="user && user.user_type == 'S'">
                        <b>Point Reserved: </b>
                        <span>{{ total_point_reserve | number }}</span>
                    </div>
                </div>
                <ul class="sessions-desc">
                    <li>
                        Date and time is based on user timezone setting. Your timezone: {{ a.userTime }}</li>
                    <li>Today's class is listed on top.</li>
                    <li>Only {{ limit }} sessions are listed. Today might not be shown if there are too many reservations.</li>
                </ul>
                <div class="loader" *ngIf=" show.loader.loadSchedule ">
                    <mat-spinner [diameter]="48"></mat-spinner>
                    Loading schedule
                </div>
                <div class="mini-stat">
                    <span>
                        <b>Reserved:</b> {{ count.session.future | number }}</span>
                    <span>
                        <b>Past:</b> {{ count.session.past | number }}</span>
                </div>
                <table *ngIf=" sessions.length ">
                    <tr>
                        <th>No.</th>
                        <th *ngIf="user.user_type != 'T' ">Teacher</th>
                        <th *ngIf="user.user_type == 'T' ">Student</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Point</th>
                        <th>Class Id</th>
                        <th class="m-0 p-0">CHK</th>
                    </tr>
                    <tr [attr.time]="session['time']" *ngFor=" let session of sessionsToday ">
                        <td>{{ session.idx }}</td>
                        <td *ngIf="user.user_type != 'T' ">
                            <a class="user-info" routerLink="/manager/user-info/{{ session.teacher?.idx }}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName ( session.teacher?.display_name ) }}
                            </a>
                        </td>
                        <td *ngIf="user.user_type == 'T' ">
                            <a class="user-info" routerLink="/manager/user-info/{{ session.student?.idx }}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName ( session.student?.display_name ) }}
                            </a>
                        </td>
                        <td>
                            <div>{{ session.date }}</div>
                        </td>
                        <td>{{ session.class_begin }}-{{ session.class_end }}</td>
                        <td>{{ session.point | number }}</td>
                        <td>
                            <div>{{ session.student?.class_software }}</div>
                            <div>{{ session.student?.class_software_id }}</div>
                        </td>
                        <td class="m-0 p-0" width="1%">
                            <span matTooltip="reserve:{{ session.stamp_reserve }} checked:{{ session.stamp_checked}}">{{ session.stamp_checked != '0' ? 'Y' : 'N' }}</span>
                        </td>
                    </tr>
                    <tr class="bottom" [attr.time]="session['time']" *ngFor=" let session of sessions ">
                        <td>
                            <a class="user-info" routerLink="/manager/session-edit/{{session.idx}}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ session.idx }}
                            </a>
                        </td>
                        <td *ngIf="user.user_type != 'T' ">
                            <a class="user-info" routerLink="/manager/user-info/{{ session.teacher?.idx }}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName ( session.teacher?.display_name ) }}
                            </a>
                        </td>
                        <td *ngIf="user.user_type == 'T' ">
                            <a class="user-info" routerLink="/manager/user-info/{{ session.student?.idx }}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName ( session.student?.display_name ) }}
                            </a>
                        </td>
                        <td>{{ session.date }}</td>
                        <td>{{ session.class_begin }}-{{ session.class_end }}</td>
                        <td>{{ session.point | number }}</td>
                        <td>
                            <div>{{ session.student?.class_software }}</div>
                            <div>{{ session.student?.class_software_id }}</div>
                        </td>
                        <td class="m-0 p-0" width="1%">
                            <span matTooltip="reserve:{{ session.stamp_reserve }} checked:{{ session.stamp_checked}}">{{ session.stamp_checked != '0' ? 'Y' : 'N' }}</span>
                        </td>
                    </tr>
                </table>
            </section>
        </div>

        <div class="col-sm-12 col-md-5">
            <section id="point-history">
                <h2>Point History</h2>
                <small class="text-danger">
                  Note: Class Date, Begin are base on student UTC.
                </small>
                <div class="loader" *ngIf=" show.loader.loadPointHistory ">
                    <mat-spinner [diameter]="48"></mat-spinner>
                    Loading Payment Info...
                </div>
                <table *ngIf=" ! show.loader.loadPointHistory ">
                    <tr>
                        <th>Teacher</th>
                        <th>Action</th>
                        <th>Point</th>
                        <th>idx reservation</th>
                        <th>Action Time</th>
                        <th>Class Data</th>
                    </tr>

                    <tr *ngFor=" let log of pointHistory ">
                        <td>
                            <a class="user-info" *ngIf="log?.teacher?.idx" matTooltip="{{ log.teacher?.display_name }}" routerLink="/manager/user-info/{{ log.teacher?.idx }}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ a.shortName( log.teacher.display_name, 8, log.teacher.idx ) }}
                            </a>
                        </td>
                        <td>
                            <div class="reason">{{ log.reason }}</div>
                        </td>
                        <td>
                            <div class="reason">{{ log.apply_point | number }}</div>
                        </td>
                        <td>
                            <a class='user-info' routerLink="/manager/session/idx/{{log.idx_reservation}}">
                                <svg viewBox="0 0 576 512">
                                    <path fill="currentColor" d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                                </svg>
                                {{ log.idx_reservation }}
                            </a>
                        </td>
                        <td>
                            {{ log.stamp * 1000 | date:'yyyy-MM-dd HH:mm:ss z' }}
                        </td>
                        <td>
                          <div *ngIf="log.class_data">
                            <div>Date: {{log.class_data?.date_display}}</div>
                            <div>Time: {{log.class_data?.class_begin_display}}</div>
                            <div>Dur: {{log.class_data?.duration}}mins</div>
                          </div>
                        </td>
                    </tr>
                </table>
            </section>
        </div>
    </div>

</section>